import{u as ke,a as xe,b as _e,i as X,h as z,f as p,Q as ye,k as Se,c as Ce,j as Z}from"./QScrollArea.172e7228.js";import{a as ee,u as te,e as Y,h as Ie,i as we,j as qe,Q as J,g as Te}from"./QPage.6924035d.js";import{k as O,o as ae,h as l,l as Le,c as g,g as ne,aK as pe,aC as se,r as D,w as E,C as oe,aL as $e,m as Be,N as $,K as Qe,u as B,U as Ee,s as h,t as w,x as m,B as f,ak as j,ao as A,z as q,ah as L,E as x,at as N,aj as V,ai as M,Q as K,a9 as Ne,ar as Ae,an as Oe,aM as je,aN as Pe}from"./index.5e1d1145.js";import"./QResizeObserver.b28b9c55.js";var Re=O({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:s}){let o=!1,i,c,r,d,u,_;function v(){i&&i(),i=null,o=!1,clearTimeout(r),clearTimeout(d),c!==void 0&&c.removeEventListener("transitionend",u),u=null}function b(a,k,S){a.style.overflowY="hidden",k!==void 0&&(a.style.height=`${k}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=S}function y(a,k){a.style.overflowY=null,a.style.height=null,a.style.transition=null,v(),k!==_&&s(k)}function P(a,k){let S=0;c=a,o===!0?(v(),S=a.offsetHeight===a.scrollHeight?0:void 0):_="hide",b(a,S,k),r=setTimeout(()=>{a.style.height=`${a.scrollHeight}px`,u=C=>{(Object(C)!==C||C.target===a)&&y(a,"show")},a.addEventListener("transitionend",u),d=setTimeout(u,e.duration*1.1)},100)}function R(a,k){let S;c=a,o===!0?v():(_="show",S=a.scrollHeight),b(a,S,k),r=setTimeout(()=>{a.style.height=0,u=C=>{(Object(C)!==C||C.target===a)&&y(a,"hide")},a.addEventListener("transitionend",u),d=setTimeout(u,e.duration*1.1)},100)}return ae(()=>{o===!0&&v()}),()=>l(Le,{css:!1,appear:e.appear,onEnter:P,onLeave:R},n.default)}});const He={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},H={xs:2,sm:4,md:8,lg:16,xl:24};var W=O({name:"QSeparator",props:{...ee,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const n=ne(),s=te(e,n.proxy.$q),o=g(()=>e.vertical===!0?"vertical":"horizontal"),i=g(()=>` q-separator--${o.value}`),c=g(()=>e.inset!==!1?`${i.value}-${He[e.inset]}`:""),r=g(()=>`q-separator${i.value}${c.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(s.value===!0?" q-separator--dark":"")),d=g(()=>{const u={};if(e.size!==void 0&&(u[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const _=e.spaced===!0?`${H.md}px`:e.spaced in H?`${H[e.spaced]}px`:e.spaced,v=e.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${v[0]}`]=u[`margin${v[1]}`]=_}return u});return()=>l("hr",{class:r.value,style:d.value,"aria-orientation":o.value})}});const T=pe({}),ze=Object.keys(se);var De=O({name:"QExpansionItem",props:{...se,...ke,...ee,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...xe,"click","after-show","after-hide"],setup(e,{slots:n,emit:s}){const{proxy:{$q:o}}=ne(),i=te(e,o),c=D(e.modelValue!==null?e.modelValue:e.defaultOpened),r=D(null),d=Y(),{show:u,hide:_,toggle:v}=_e({showing:c});let b,y;const P=g(()=>`q-expansion-item q-item-type q-expansion-item--${c.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),R=g(()=>{if(e.contentInsetLevel===void 0)return null;const t=o.lang.rtl===!0?"Right":"Left";return{["padding"+t]:e.contentInsetLevel*56+"px"}}),a=g(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),k=g(()=>{const t={};return ze.forEach(I=>{t[I]=e[I]}),t}),S=g(()=>a.value===!0||e.expandIconToggle!==!0),C=g(()=>e.expandedIcon!==void 0&&c.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),ie=g(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),le=g(()=>({expanded:c.value===!0,detailsId:e.targetUid,toggle:v,show:u,hide:_})),U=g(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[c.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":c.value===!0?"true":"false","aria-owns":d,"aria-controls":d,"aria-label":t}});E(()=>e.group,t=>{y!==void 0&&y(),t!==void 0&&G()});function ce(t){a.value!==!0&&v(t),s("click",t)}function ue(t){t.keyCode===13&&F(t,!0)}function F(t,I){I!==!0&&r.value!==null&&r.value.focus(),v(t),Qe(t)}function re(){s("after-show")}function de(){s("after-hide")}function G(){b===void 0&&(b=Y()),c.value===!0&&(T[e.group]=b);const t=E(c,Q=>{Q===!0?T[e.group]=b:T[e.group]===b&&delete T[e.group]}),I=E(()=>T[e.group],(Q,be)=>{be===b&&Q!==void 0&&Q!==b&&_()});y=()=>{t(),I(),T[e.group]===b&&delete T[e.group],y=void 0}}function ge(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},I=[l($,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&c.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:C.value})];return ie.value===!0&&(Object.assign(t,{tabindex:0,...U.value,onClick:F,onKeyup:ue}),I.unshift(l("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),l(p,t,()=>I)}function me(){let t;return n.header!==void 0?t=[].concat(n.header(le.value)):(t=[l(p,()=>[l(z,{lines:e.labelLines},()=>e.label||""),e.caption?l(z,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](l(p,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>l($,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](ge()),t}function he(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:i.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return S.value===!0&&(t.clickable=!0,t.onClick=ce,Object.assign(t,a.value===!0?k.value:U.value)),l(X,t,me)}function fe(){return oe(l("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:R.value,id:d},Be(n.default)),[[$e,c.value]])}function ve(){const t=[he(),l(Re,{duration:e.duration,onShow:re,onHide:de},fe)];return e.expandSeparator===!0&&t.push(l(W,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),l(W,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),t}return e.group!==void 0&&G(),ae(()=>{y!==void 0&&y()}),()=>l("div",{class:P.value},[l("div",{class:"q-expansion-item__container relative-position"},ve())])}});const Ve=l("div",{key:"svg",class:"q-checkbox__bg absolute"},[l("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[l("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),l("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Me=O({name:"QCheckbox",props:Ie,emits:we,setup(e){function n(s,o){const i=g(()=>(s.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[l("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[l($,{class:"q-checkbox__icon",name:i.value})])]:[Ve]}return qe("checkbox",n)}});const Ke={__name:"SubtaskListItem",props:["taskId","subtask"],setup(e){const n=e,s=B(),o=D(!1),i=async()=>{o.value||(o.value=!0,await s.toggleSubtaskCompletion(n.taskId,n.subtask),o.value=!1)};return(c,r)=>oe((h(),w(X,{tag:"label",class:"q-pa-none q-pl-sm"},{default:m(()=>[f(p,null,{default:m(()=>[f(z,null,{default:m(()=>[j(A(e.subtask.title),1)]),_:1})]),_:1}),f(p,{side:""},{default:m(()=>[f(Me,{"model-value":e.subtask.completed,"onUpdate:modelValue":i,disable:o.value},null,8,["model-value","disable"])]),_:1})]),_:1})),[[Ee]])}},Ue={key:0},Fe=x("div",{class:"text-subtitle2 text-grey-8"},"Description",-1),Ge={class:"text-body2 q-mb-md"},Ye={key:1},Je=x("div",{class:"text-subtitle2 text-grey-8"},"Subtasks",-1),We={class:"text-body2"},Xe={class:"fit row justify-end items-center"},Ze={__name:"TaskCard",props:["task"],setup(e){const n=e,s=B(),o=g(()=>!!(n.task.description||n.task.subtasks.length)),i=g(()=>n.task.subtasks.length?`${n.task.subtasks.filter(r=>!!r.completed).length} of ${n.task.subtasks.length} subtasks`:""),c=()=>{s.dialogContent="editTask",s.draftTask._id===""&&s.loadDraftTask(n.task),s.dialogOpen=!0};return(r,d)=>(h(),w(J,{class:"q-mb-sm task-card overflow-hidden"},{default:m(()=>[f(De,{label:e.task.title,caption:q(i)},{default:m(()=>[f(J,{class:"task-card overflow-hidden"},{default:m(()=>[q(o)?(h(),w(ye,{key:0},{default:m(()=>[e.task.description?(h(),L("div",Ue,[Fe,x("div",Ge,A(e.task.description),1)])):N("",!0),e.task.subtasks.length?(h(),L("div",Ye,[Je,x("div",We,[f(Se,null,{default:m(()=>[(h(!0),L(V,null,M(e.task.subtasks,(u,_)=>(h(),w(Ke,{key:_,taskId:e.task._id,subtask:u},null,8,["taskId","subtask"]))),128))]),_:1})])])):N("",!0)]),_:1})):N("",!0),f(Ce,null,{default:m(()=>[x("div",Xe,[f(K,{disable:q(s).awaitingResponse,onClick:d[0]||(d[0]=u=>c(e.task)),flat:"","text-color":"primary"},{default:m(()=>[j("Edit")]),_:1},8,["disable"])])]),_:1})]),_:1})]),_:1},8,["label","caption"])]),_:1}))}},et={style:{"letter-spacing":"1.8px"},class:"text-caption text-weight-bold text-grey-7 q-py-sm text-uppercase row fit justify-between items-end"},tt={class:"q-mr-lg"},at={__name:"StatusColumn",props:["column"],setup(e){const n=e,s=B(),o=()=>{s.dialogContent="editColumn",s.loadDraftColumn(n.column),s.dialogOpen=!0};return(i,c)=>(h(),w(Z,{style:{height:"calc(100vh - 110px)",width:"320px"},class:"q-mr-md"},{default:m(()=>{var r;return[x("div",et,[x("div",null,[f($,{style:Ne({color:e.column.color==="default"?"#637CAA":e.column.color}),name:"mdi-circle"},null,8,["style"]),j(" "+A(e.column.name)+" ("+A(((r=q(s).tasksByColumn(e.column._id))==null?void 0:r.length)||0)+") ",1)]),x("div",tt,[f(K,{size:"sm",round:"",flat:"",icon:"mdi-pencil-outline",class:"q-mb-none",onClick:o})])]),x("div",null,[(h(!0),L(V,null,M(q(s).tasksByColumn(e.column._id),d=>(h(),w(Ze,{key:d._id,task:d},null,8,["task"]))),128))])]}),_:1}))}},nt={style:{width:"320px"}},st={__name:"NewColumn",setup(e){const n=B(),s=()=>{n.dialogContent="createColumn",n.dialogOpen=!0};return(o,i)=>(h(),L("div",nt,[f(K,{disable:q(n).awaitingResponse,style:{width:"100%",height:"calc(100vh - 160px)","margin-top":"35px"},onClick:s},{default:m(()=>[f($,{color:"accent",name:"mdi-plus"}),j(" New Column ")]),_:1},8,["disable"])]))}};const ot={class:"q-pa-md"},it={class:"row no-wrap"},dt=Ae({__name:"IndexPage",setup(e){const n=B(),s=Oe(),o=Pe(),{isLoggedIn:i}=je(s);return E(i,()=>{i.value||o.push({path:"/login"})}),(c,r)=>(h(),w(Te,{class:"main-page"},{default:m(()=>[x("div",ot,[f(Z,{style:{height:"calc(100vh - 110px)",width:"100%"}},{default:m(()=>[x("div",it,[(h(!0),L(V,null,M(q(n).columns,(d,u)=>(h(),w(at,{key:u,column:d},null,8,["column"]))),128)),q(n).selectedBoard?(h(),w(st,{key:0})):N("",!0)])]),_:1})])]),_:1}))}});export{dt as default};
